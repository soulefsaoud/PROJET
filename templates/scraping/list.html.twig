{% extends 'base.html.twig' %}

{% block title %}Liste des recettes{% endblock %}

{% block body %}
    <div class="container">
        <h1>Recettes scrapées ({{ recipes|length }})</h1>

        <a href="{{ path('scraping_form') }}" class="btn btn-primary mb-3">Ajouter une recette</a>

        <div class="row">
            {% for recipe in recipes %}
                <div class="col-md-4 mb-3">
                    <div class="card h-100">
                        {% if recipe.imagePath %}
                            <img src="{{ asset(recipe.imagePath) }}"
                                 class="card-img-top"
                                 alt="{{ recipe.imageAlt ?: recipe.title }}"
                                 style="height: 200px; object-fit: cover;">
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ recipe.title }}</h5>
                            <p class="card-text">
                                <small class="text-muted">
                                    Source: <a href="{{ recipe.sourceUrl }}" target="_blank">{{ recipe.sourceUrl|slice(0, 50) }}...</a>
                                </small>
                            </p>
                            <div class="mt-2">
                                {% if recipe.prepTime %}
                                    <span class="badge bg-info">Préparation: {{ recipe.prepTime }}min</span>
                                {% endif %}
                                {% if recipe.cookTime %}
                                    <span class="badge bg-warning">Cuisson: {{ recipe.cookTime }}min</span>
                                {% endif %}
                                {% if recipe.servings %}
                                    <span class="badge bg-success">{{ recipe.servings }} portions</span>
                                {% endif %}
                            </div>
                        </div>

                        <div class="mt-3">
                            <a href="{{ path('recipe_show', {id: recipe.id}) }}" class="btn btn-primary btn-sm">Voir la recette</a>
                        </div

                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
